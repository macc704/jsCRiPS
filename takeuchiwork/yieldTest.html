<!DOCTYPE html>
<meta charset="utf-8">
<script src="./ConcurrentThread.js"></script>
<script src="./jscrips.js"></script>
<script>
    var mth = {};
    function main() {
        mth = Thread.create(function () {
            var ttl = createTurtle();
            var ttl2 = createTurtle();
            ttl2.color("green");
            ttl.warp(100, 50);
            ttl.rt(90);
            th.join();
            ttl2.rt(90);
            th.join();
            for (var i = 0; i < 20; i++) {
                ttl.fd(Math.random() * 5 + 2);
                th.join();
                ttl2.fd(Math.random() * 5 + 2);
                th.join();
            }
            for (var i = 0; i < 360; i += 5) {
                ttl.fd(5);
                th.join();
                ttl.rt(5);
                th.join();
            }
        })
    }
    window.onload = main();


    function restart() {
        clearTurtleCanvas();
        clearLocusCanvas();
        try {
            mth.kill();
            th.kill();
        } catch (e) {
            // mth,thが終了時に例外が出る、無視でok?
        }
        ttls = [];
        main();
    }


</script>

<style type="text/css">
    canvas {
        border: 1px solid #999;
        position: absolute;
    }
</style>

<body>
速<input type="range" name="moveSpeed" min="0" max="12" step="2"
        value="6" onchange="changeSpeed(this.value)">遅
<input type="button" value="再描画" onclick="restart()">
<br>
<canvas id="locusCanvas" width="600" height="600"></canvas>
<canvas id="turtleCanvas" width="600" height="600"></canvas>
</body>

<script>
    // 余計なアンチエイリアスの解除
    var c = document.getElementById('locusCanvas');
    c.getContext('2d').translate(0.5, 0.5);
</script>